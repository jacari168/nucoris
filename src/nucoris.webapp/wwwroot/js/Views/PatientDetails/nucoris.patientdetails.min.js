let endAdmissionCallback=()=>confirmDialog("Are you sure you want to discharge this patient?",n=>{n&&$.ajax({type:"Delete",url:"/api/patients/"+$("#patientIds").data("patientid")+"/admissions/"+$("#patientIds").data("admissionid"),success:function(){location.reload()}})});$("#endAdmission").on("click",()=>endAdmissionCallback());let newAdmissionCallback=()=>confirmDialog("Are you sure you want to readmit this patient?",n=>{n&&$.ajax({type:"Post",url:"/api/patients/"+$("#patientIds").data("patientid")+"/admissions",success:function(){location.reload()}})});$("#newAdmission").on("click",()=>newAdmissionCallback());let removeAllergyCallback=n=>confirmDialog(`Are you sure you want to remove allergy '${n}'?`,t=>{t&&$.ajax({type:"Delete",url:"/api/patients/"+$("#patientIds").data("patientid")+`/allergies/${n}`,success:reloadAllergiesAfterChanges})}),attachRemoveAllergyCallbackToAllergyElement=n=>{$(n).on("click",()=>{removeAllergyCallback($(n).data("allergyname"))})},addRemoveCallbackToAllAllergyElements=()=>$(".nucoris-allergy").each((n,t)=>attachRemoveAllergyCallbackToAllergyElement(t));addRemoveCallbackToAllAllergyElements();let reloadAllergiesAfterChanges=()=>{$("#allergies").load("/PatientDetails/Allergies?patientId="+$("#patientIds").data("patientid"),null,()=>addRemoveCallbackToAllAllergyElements())},addAllergyCallback=()=>addTextItemDialog("Please type in the new allergy:",n=>{n&&$.ajax({type:"Post",url:"/api/patients/"+$("#patientIds").data("patientid")+"/allergies/"+n,success:reloadAllergiesAfterChanges})});$("#addAllergy").on("click",()=>addAllergyCallback());$("#userSelectionModal").on("show.bs.modal",function(n){let i=$(n.relatedTarget),u=i.data("orderdesc"),r=i.data("orderid"),t=$(this);t.find("#orderUserAssigned").attr("orderid",r);t.find("#orderUserUnassigned").attr("orderid",r);t.find(".modal-title").text(u)});$("#orderUserAssigned").on("click",()=>{let n=$("#orderUserAssigned").attr("orderid"),t=$("#userSelection").val();$.ajax({type:"Patch",url:"/api/patients/"+$("#patientIds").data("patientid")+`/orders/${n}?assignedUserId=${t}`,success:()=>reloadOrderAfterChanges(n)});$("#userSelectionModal").modal("hide")});$("#orderUserUnassigned").on("click",()=>{let n=$("#orderUserAssigned").attr("orderid");$.ajax({type:"Patch",url:"/api/patients/"+$("#patientIds").data("patientid")+`/orders/${n}`,success:()=>reloadOrderAfterChanges(n)});$("#userSelectionModal").modal("hide")});let stopOrderCallback=(n,t)=>confirmDialog(`Are you sure you want to stop order '${n}' ?`,n=>{n&&$.ajax({type:"Delete",url:"/api/patients/"+$("#patientIds").data("patientid")+`/orders/${t}`,success:()=>reloadOrderAfterChanges(t)})}),bindStopOrderHandlerToOrderElement=n=>{$(n).on("click",()=>{stopOrderCallback($(n).data("orderdesc"),$(n).data("orderid"))})},addStopOrderHandlerToAllStopOrderElements=()=>$(".nucoris-stop-order").each((n,t)=>bindStopOrderHandlerToOrderElement(t));addStopOrderHandlerToAllStopOrderElements();let reloadOrderAfterChanges=n=>{$("#"+n).load("/PatientDetails/Order?patientId="+$("#patientIds").data("patientid")+"&orderId="+n,null,()=>bindStopOrderHandlerToOrderElement($("#"+n).find(".nucoris-stop-order")))};